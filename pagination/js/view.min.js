let view=function(){const e=$("#nextPageBtn"),t=$("#prevPageBtn");let n=0;function o(){$(document).ready(function(){document.title=`Strona  ${model.currentPage} ${""==model.pageInfo[parseInt(model.currentPage)-1]?"":"-"} ${model.pageInfo[parseInt(model.currentPage)-1]} - ${model.documentName}`,$("#pageInput").val(model.currentPage)})}function a(){let e=$('a[href*="chap"'),t=[];for(let n=0;n<e.length;n++)if(e[n].textContent==model.pageInfo[model.currentPage-1]){t=e[n].getAttribute("href");break}window.location.hash=t}function l(){$("#mainContent .footnote").click(function(){let e=$(this);const t=$($("#templateMainContent").prop("content")).find(`a[href="#${e[0].id}"]`).parents("li");$("#modalFootnoteInformation").modal("show"),$(".modal-body").html(t[0].innerText+` <a href='${e[0].hash}'><img src='https://cdn.jsdelivr.net/npm/bootstrap-icons/icons/box-arrow-in-up-left.svg' alt='Wróć do treści'></a>`),$(".modal-body a").click(function(){$("#modalFootnoteInformation").modal("hide")}),setTimeout(function(){$(".modal-body").focus()},300),MathJax.typesetPromise()})}function i(){$("#mainContent .footnote-harvard").click(function(){const e=$($("#templateMainContent").prop("content")).find(`a[href="#${$(this)[0].id}"]`).parents("li");$("#modalFootnoteInformation").modal("show"),$(".modal-body").html(e[0].innerText+` <a href='${$(this)[0].hash}'><img src='https://cdn.jsdelivr.net/npm/bootstrap-icons/icons/box-arrow-in-up-left.svg' alt='Wróć do treści'></a>`),$(".modal-body a").click(function(){$("#modalFootnoteInformation").modal("hide")}),setTimeout(function(){$(".modal-body").focus()},300),MathJax.typesetPromise()})}function r(){let e=window.location.hash;if(e.includes("chap"))$('a[href*="chap"').removeClass("active"),$(`a[href="${e}"]`).addClass("active"),$(`a[href="${e}"]`).each(function(){$(this)[0].scrollIntoView()});else if(""!=e&&!e.includes("chap")){$('a[href*="chap"').removeClass("active");let e=$('a[href*="chap"'),t=[];for(let n=0;n<e.length;n++)if(e[n].innerText==model.pageInfo[model.currentPage-1]){t=e[n].getAttribute("href");break}$(`a[href="${t}"]`).addClass("active"),$(`a[href="${t}"]`).each(function(){$(this)[0].scrollIntoView()})}}function c(){$(document).ready(function(){1==model.currentPage&&model.currentPage!=model.totalPageNumbers?t.addClass("disabled"):model.currentPage==model.totalPageNumbers&&1!=model.currentPage?e.addClass("disabled"):model.currentPage==model.totalPageNumbers&&1==model.currentPage?(t.addClass("disabled"),e.addClass("disabled")):(t.removeClass("disabled"),e.removeClass("disabled"))})}function d(e,t){let n=(t.id||"chap")+"-"+(t.children.length+1);e.id=n,e.setAttribute("tabindex","-1");const o=new DocumentNode(n,+e.nodeName.substring(1),e.innerText,t,e);return t.children.push(o),model.documentStructure.push(o),o}function s(){const e=$(".tfl-deque-tree-no-select");for(let t=0;t<e.length;t++)deque.createTree({selectStyle:""},e[t])}return document.getElementById("tflYear").innerText=(new Date).getUTCFullYear(),{createPages:function(){$($("#templateMainContent").prop("content")).find(".nextPage").each(function(){model.totalPageNumbers++;const e=$(`<span id="${util.createPageId(model.totalPageNumbers)}" class="page-number" role="heading" aria-level="2" tabindex="-1">Strona: ${model.totalPageNumbers} ${""==model.pageInfo[model.totalPageNumbers-1]?"":"-"} ${model.pageInfo[model.totalPageNumbers-1]}</span><br>`);e.insertAfter(this),model.documentPageElements.push(e.get(0))}),$($("#templateMainContent").prop("content")).find(".nextPage").remove()},updateDocumentTitle:o,updatePageHash:a,clearInputOnHoverClick:function(){$("#pageInput").on("click focusin",function(){this.value=""})},parseDocumentForListChapter:function(){model.documentName=$("h1")[0].innerText,$($("#templateMainContent").prop("content")).find("section").each(function(){sectionId=$(this)[0].id.replace(/[^0-9]/g,""),model.currentHeaderName=$(this).find(":header").length>0?$(this).find(":header")[0].innerText:model.currentHeaderName,model.pageInfo[parseInt(sectionId)-1]=model.currentHeaderName})},createSectionsPages:function(){$($("#templateMainContent").prop("content")).find(".sectionNextPage").each(function(){model.totalSectionPageNumbers++,this.setAttribute("id",`section-${util.createPageId(model.totalSectionPageNumbers)}`)})},detectStructure:function(){let e=model.documentRoot;$($("#templateMainContent").prop("content")).find("h1").addClass("chap-0"),$($("#templateMainContent").prop("content")).find(":header:not(h1)").each(function(){let t=this.nodeName.substring(1);for(;t<=e.level&&e.parent;)e=e.parent;t-e.level==1?e=d(this,e):t-e.level==0?e=d(this,e.parent):console.warn("Not consistent document structure")})},createTableOfContent:function(){const e=$('<ul class="nav nav-pills flex-column"></ul>');!function e(t,n){for(const o of t){const t=$('<li class="nav-item"><a class="nav-link" href="#'+o.id+'">'+o.name+"</a></li>");if(n.append(t),o.children&&o.children.length>0){const t=$("<li></li>");n.append(t);const a=$('<ul class="nav nav-pills flex-column ml-3"></ul>');t.append(a),e(o.children,a)}}}(model.documentRoot.children,e),$("#tableOfContent").append(e)},createMobileTableOfContent:function(){const e=$('<ul class="nav nav-pills flex-column"></ul>');!function e(t,n){for(const o of t){const t=$('<li class="nav-item"><a class="nav-link" href="#'+o.id+'">'+o.name+"</a></li>");if(n.append(t),o.children&&o.children.length>0){const t=$("<li></li>");n.append(t);const a=$('<ul class="nav nav-pills flex-column ml-3"></ul>');t.append(a),e(o.children,a)}}}(model.documentRoot.children,e),$("#mobileNavTableOfContent").append(e)},navigateToWindowLocatonPage:function(){$(document).ready(function(){let e=window.location.hash,t=[];""==e?(model.currentPage=1,t=$($("#templateMainContent").prop("content")).find(`#section-page-${model.currentPage}`),$("#mainContent").empty().html(t[0].innerHTML)):"#mainContent"==e?(t=$($("#templateMainContent").prop("content")).find(`#section-page-${model.currentPage}`),$("#mainContent").empty().html(t[0].innerHTML),$("#mainContent").focus()):e.includes("chap")?(t=$($("#templateMainContent").prop("content")).find(`${e}`).parents("section"),$("#mainContent").empty().html(t[0].innerHTML),$(`${e}`).focus()):e.includes("ref")?(t=$($("#templateMainContent").prop("content")).find(`a[href='${e.replace("ref","")}']`).parents("section"),$("#mainContent").empty().html(t[0].innerHTML),$(`a[href='${e.replace("ref","")}']`).focus()):(t=$($("#templateMainContent").prop("content")).find(`a[href='${e}']`).parents("section"),$("#mainContent").empty().html(t[0].innerHTML),$(`a[href='${e}']`).focus()),model.synth.cancel(),$("#speakContentBtn").html("Czytaj treść strony"),$("#speakContentBtn").attr("aria-label","Czytaj treść strony"),$("#speakContentBtn").attr("title","Czytaj treść strony"),model.pageContent=$("#mainContent")[0].innerText,MathJax.typesetPromise(),$("#content").removeClass("col-md-9").addClass("col-md-12"),$("#sideNavbar").hide("slow"),$("#revealSideNavbar").attr("aria-expanded",!1),$("#tflMobileNavBtn").attr("aria-expanded",!1),model.currentPage=t[0].id.replace(/[^0-9]/g,""),$("#pageNumber").text(`Aktualny numer strony ${model.currentPage} z ${model.totalPageNumbers}`)})},createOnClickEventListOfFootnotes:function(){$(document).ready(function(){$("#mainContent li a").off("click").on("click",function(e){const t=$($("#templateMainContent").prop("content")).find(`a[href="#${$(this)[0].parentNode.id}"]`).parents("section");window.location.hash=`#${$(this)[0].parentNode.id}`,$("#mainContent").empty().html(t[0].innerHTML),model.synth.cancel(),$("#speakContentBtn").html("Czytaj treść strony"),$("#speakContentBtn").attr("aria-label","Czytaj treść strony"),$("#speakContentBtn").attr("title","Czytaj treść strony"),model.pageContent=$("#mainContent")[0].innerText,MathJax.typesetPromise(),l(),i(),model.currentPage=t[0].id.replace(/[^0-9]/g,""),a(),o(),r(),c(),s()})})},createOnClickEventHarvardFootnotes:i,createOnClickEventTraditionalFootnotes:l,spyOnCurrentChapter:r,checkPageButtonState:c,createTooltips:function(){$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()})},createCopyButtons:function(){$($("#templateMainContent").prop("content")).find("pre").each(function(e,t){const o=`snippet-${n}`;t.setAttribute("id",o),n++,$(`\n            <button type="button" aria-label="Kopiuj kod źródłowy do schowka" class="copy-btn btn btn-dark btn-sm" data-clipboard-action="copy" data-clipboard-target="#${o}">\n                Kopiuj kod źródłowy do schowka\n            </button>`).insertAfter($(t).parent())})},renderTree:s,toggleTableOfContentView:function(){$("#revealSideNavbar").click(function(){$("#content").toggleClass("col-md-12 col-md-9"),$("#sideNavbar").toggle("slide"),r(),$(this).attr("aria-expanded","false"==$(this).attr("aria-expanded"))})},toggleMobileTableOfContentView:function(){$(".tfl-mobile-nav").click(function(){$(this).toggleClass("active"),$("#mobileNavTableOfContent").toggleClass("open"),$("#content").toggleClass("open"),$(".container-fluid div:first-child").toggleClass("open"),r(),$("#tflMobileNavBtn").attr("aria-expanded","false"==$("#tflMobileNavBtn").attr("aria-expanded")),$("#mobileNavTableOfContent a").click(function(){$("#mobileNavTableOfContent").removeClass("open"),$(".tfl-mobile-nav").removeClass("active"),$("#content").removeClass("open"),$(".container-fluid div:first-child").removeClass("open")})})}}}();